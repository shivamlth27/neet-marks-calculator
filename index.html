<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description"
    content="Calculate your NEET (UG) 2025 marks instantly. Free online tool to calculate NEET score based on official answer key. Supports all test booklet codes (45-48)." />
  <meta name="keywords"
    content="NEET marks calculator, NEET 2025, NEET score calculator, NEET UG calculator, medical entrance calculator" />
  <meta name="author" content="Shivam" />
  <meta name="robots" content="index, follow" />
  <meta property="og:title" content="NEET (UG) 2025 Marks Calculator" />
  <meta property="og:description"
    content="Calculate your NEET (UG) 2025 marks instantly. Free online tool to calculate NEET score based on official answer key." />
  <meta property="og:url" content="https://shivamlth27.github.io/neet-marks-calculator/" />
  <meta property="og:type" content="website" />
  <title>NEET (UG) 2025 Marks Calculator - Calculate Your Score Instantly</title>
  <style>
    :root {
      --primary-color: #007BFF;
      --primary-hover: #0056b3;
      --success-color: #28a745;
      --success-hover: #218838;
      --border-color: #dee2e6;
      --bg-light: #f8f9fa;
      --text-dark: #333;
      --text-light: #666;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 20px;
      line-height: 1.6;
      color: var(--text-dark);
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: var(--text-dark);
      font-size: 2.2em;
      font-weight: 700;
    }

    h3 {
      color: var(--text-dark);
      margin-bottom: 15px;
      font-size: 1.4em;
    }

    .section {
      margin-bottom: 30px;
      padding: 20px;
      background: var(--bg-light);
      border-radius: 8px;
      border: 1px solid var(--border-color);
    }

    label {
      display: block;
      font-weight: 600;
      margin: 15px 0 8px;
      color: var(--text-dark);
    }

    select,
    input[type="file"] {
      width: 100%;
      padding: 10px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 15px;
      transition: border-color 0.3s ease;
    }

    select:focus,
    input[type="file"]:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
    }

    button {
      margin-top: 20px;
      background: var(--primary-color);
      color: #fff;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      font-weight: 600;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background: var(--primary-hover);
    }

    .results {
      margin-top: 25px;
      background: var(--bg-light);
      border: 1px solid var(--border-color);
      padding: 20px;
      border-radius: 8px;
    }

    .results p {
      margin: 10px 0;
      font-size: 16px;
    }

    .results strong {
      color: var(--text-dark);
      font-weight: 600;
    }

    .wrong-list {
      max-height: 150px;
      overflow-y: auto;
      background: #fff;
      border: 1px solid var(--border-color);
      padding: 12px;
      border-radius: 6px;
      font-family: monospace;
      white-space: nowrap;
      margin-top: 10px;
    }

    .instructions {
      background: var(--bg-light);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }

    .instructions ol {
      margin: 15px 0;
      padding-left: 25px;
    }

    .instructions li {
      margin: 12px 0;
      color: var(--text-light);
    }

    .instructions code {
      background: #fff;
      padding: 3px 6px;
      border-radius: 4px;
      font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
      font-size: 14px;
      border: 1px solid var(--border-color);
    }

    .copy-button {
      background: var(--success-color);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      margin: 15px 0;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }

    .copy-button:hover {
      background: var(--success-hover);
    }

    pre {
      background: #fff;
      padding: 15px;
      border-radius: 6px;
      border: 1px solid var(--border-color);
      overflow-x: auto;
      margin: 15px 0;
    }

    pre code {
      font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
      font-size: 14px;
      line-height: 1.5;
    }

    .keyboard-shortcut {
      background: #e9ecef;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 0.9em;
    }

    @media (max-width: 600px) {
      .container {
        padding: 20px;
      }

      h1 {
        font-size: 1.8em;
      }

      .instructions {
        padding: 15px;
      }
    }

    .subject-results {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 15px;
    }

    .subject {
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
    }

    .subject p {
      margin: 8px 0;
    }

    .subject strong {
      color: var(--primary-color);
    }

    .total-marks {
      background: #fff;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
    }

    .score-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
      text-align: center;
    }

    .score-item {
      padding: 15px;
      background: var(--bg-light);
      border-radius: 8px;
      border: 1px solid var(--border-color);
    }

    .score-item.total {
      grid-column: 1 / -1;
      background: var(--primary-color);
      color: white;
      font-size: 1.2em;
      padding: 20px;
    }

    .score-label {
      display: block;
      font-size: 0.9em;
      color: var(--text-light);
      margin-bottom: 8px;
    }

    .score-item.total .score-label {
      color: rgba(255, 255, 255, 0.9);
    }

    .score-value {
      display: block;
      font-size: 1.5em;
      font-weight: 600;
      color: var(--text-dark);
    }

    .score-item.total .score-value {
      color: white;
      font-size: 1.8em;
    }

    @media (max-width: 600px) {
      .score-grid {
        grid-template-columns: 1fr;
      }

      .score-item {
        padding: 12px;
      }

      .score-item.total {
        padding: 15px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>NEET (UG) 2025 Marks Calculator</h1>

    <div class="section">
      <h3>Calculate Your Marks</h3>
      <label for="bookletSelect">Select Test Booklet Code</label>
      <select id="bookletSelect">
        <option value="">-- Choose Booklet Code --</option>
        <option value="45">45</option>
        <option value="46">46</option>
        <option value="47">47</option>
        <option value="48">48</option>
      </select>

      <label for="respFile">Upload Recorded Responses CSV</label>
      <input type="file" id="respFile" accept=".csv" />

      <button id="computeBtn">Calculate Marks</button>

      <div id="results" class="results" style="display:none;">
        <div class="total-marks">
          <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-color);">Your NEET Score</h3>
          <div class="score-grid">
            <div class="score-item">
              <span class="score-label">Total Questions</span>
              <span class="score-value" id="totalQ">0</span>
            </div>
            <div class="score-item">
              <span class="score-label">Correct (+4)</span>
              <span class="score-value" id="correctCount">0</span>
            </div>
            <div class="score-item">
              <span class="score-label">Incorrect (−1)</span>
              <span class="score-value" id="incorrectCount">0</span>
            </div>
            <div class="score-item">
              <span class="score-label">Blank (0)</span>
              <span class="score-value" id="blankCount">0</span>
            </div>
            <div class="score-item total">
              <span class="score-label">Total Score</span>
              <span class="score-value" id="totalScore">0</span>
            </div>
          </div>
        </div>

        <h4 style="margin-top: 30px; color: var(--text-dark);">Subject-wise Analysis:</h4>
        <div class="subject-results">
          <div class="subject">
            <p><strong>Physics (Q1-45):</strong></p>
            <p>Correct: <span id="physicsCorrect">0</span></p>
            <p>Incorrect: <span id="physicsIncorrect">0</span></p>
            <p>Score: <span id="physicsScore">0</span></p>
          </div>
          <div class="subject">
            <p><strong>Chemistry (Q46-90):</strong></p>
            <p>Correct: <span id="chemistryCorrect">0</span></p>
            <p>Incorrect: <span id="chemistryIncorrect">0</span></p>
            <p>Score: <span id="chemistryScore">0</span></p>
          </div>
          <div class="subject">
            <p><strong>Biology (Q91-180):</strong></p>
            <p>Correct: <span id="biologyCorrect">0</span></p>
            <p>Incorrect: <span id="biologyIncorrect">0</span></p>
            <p>Score: <span id="biologyScore">0</span></p>
          </div>
        </div>

        <p style="margin-top: 20px;"><strong>Incorrect Q-Nos:</strong></p>
        <div id="wrongList" class="wrong-list"></div>
      </div>
    </div>

    <div class="section">
      <h3>How to Download Your Response CSV</h3>
      <ol>
        <li>Go to the NEET OMR Challenge page and log in</li>
        <li>Open your browser's Developer Tools:
          <ul>
            <li>Chrome/Edge: Press <span class="keyboard-shortcut">F12</span> or <span
                class="keyboard-shortcut">Ctrl+Shift+I</span></li>
            <li>Firefox: Press <span class="keyboard-shortcut">F12</span> or <span
                class="keyboard-shortcut">Ctrl+Shift+I</span></li>
            <li>Safari: Enable Developer Tools in Preferences → Advanced, then press <span
                class="keyboard-shortcut">Option+Command+I</span></li>
          </ul>
        </li>
        <li>Go to the "Console" tab in Developer Tools</li>
        <li>Copy and paste this code:</li>
        <pre><code id="downloadCode">(function() {
  const grid = document.querySelector("[id^='ctl00_LoginContent_grOMR']");
  if (!grid) {
    console.error("OMR table not found. Make sure you are on the Challenge OMR page and logged in.");
    return;
  }
  const rows = Array.from(grid.querySelectorAll("tr"));
  const lines = ["Qno,RecordedResponse"];
  rows.forEach(tr => {
    const qSpan = tr.querySelector("span[id$='_lbl_QuestionNo']");
    const rSpan = tr.querySelector("span[id$='_lbl_RAnswer']");
    if (qSpan && rSpan) {
      const qno = qSpan.textContent.trim().padStart(3, "0");
      const raw = rSpan.textContent.trim();
      const ans = (raw === "-" ? "" : raw);
      lines.push(`${qno},${ans}`);
    }
  });
  const csvContent = lines.join("\n");
  const blob = new Blob([csvContent], { type: "text/csv" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "NEET_OMR_Responses.csv";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  setTimeout(() => URL.revokeObjectURL(url), 1000);
})();</code></pre>
        <button class="copy-button" onclick="copyCode()">Copy Code</button>
        <li>Press Enter to run the code</li>
        <li>Your responses will be automatically downloaded as "NEET_OMR_Responses.csv"</li>
      </ol>
    </div>

    <div class="section" style="text-align: center; margin-top: 30px;">
      <p style="color: var(--text-light); font-size: 0.9em;">Total Visitors:</p>
      <a href="https://www.hitwebcounter.com" target="_blank">
        <img
          src="https://hitwebcounter.com/counter/counter.php?page=12345678&style=0006&nbdigits=6&type=page&initCount=0"
          title="Counter Widget" alt="Visit counter For Websites" border="0" />
      </a>
    </div>
  </div>

  <script>
    // ------------------------------------------------------------------------
    // 1) Embed all four provisional answer‐key mappings as JavaScript objects.
    //    Keys are zero-padded question numbers ("001"... "180").
    //    Values are either "1","2","3","4", or "1,2" etc. for multi‐correct.
    // ------------------------------------------------------------------------
    const answerKeys = {
      "45": {
        "001": "2", "002": "2", "003": "2", "004": "4", "005": "2", "006": "2", "007": "4", "008": "4", "009": "1", "010": "1",
        "011": "4", "012": "1", "013": "3", "014": "3", "015": "2", "016": "2", "017": "4", "018": "2", "019": "3", "020": "1",
        "021": "4", "022": "2", "023": "2", "024": "3", "025": "3", "026": "3", "027": "1", "028": "4", "029": "2", "030": "3",
        "031": "1", "032": "2", "033": "3", "034": "2", "035": "2", "036": "2", "037": "3", "038": "1", "039": "3", "040": "2",
        "041": "2", "042": "3", "043": "3", "044": "4", "045": "2", "046": "4", "047": "2", "048": "2", "049": "1", "050": "1",
        "051": "3", "052": "3", "053": "2", "054": "4", "055": "1", "056": "4", "057": "2", "058": "4", "059": "4", "060": "4",
        "061": "3", "062": "2", "063": "1,2", "064": "1", "065": "1", "066": "2", "067": "3", "068": "2", "069": "2", "070": "3",
        "071": "3", "072": "1", "073": "3", "074": "1", "075": "4", "076": "1", "077": "1", "078": "2", "079": "3", "080": "3",
        "081": "2", "082": "2", "083": "2", "084": "1", "085": "1", "086": "3", "087": "1", "088": "4", "089": "1", "090": "4",
        "091": "2", "092": "2", "093": "1", "094": "4", "095": "1", "096": "1", "097": "1", "098": "1", "099": "3", "100": "3",
        "101": "4", "102": "2", "103": "3", "104": "4", "105": "4", "106": "3", "107": "4", "108": "4", "109": "2", "110": "1",
        "111": "1", "112": "1", "113": "2", "114": "4", "115": "3", "116": "1", "117": "3", "118": "1", "119": "3", "120": "4",
        "121": "4", "122": "2", "123": "4", "124": "4", "125": "2", "126": "4", "127": "3", "128": "1", "129": "2", "130": "2",
        "131": "4", "132": "2", "133": "2", "134": "3", "135": "2", "136": "1", "137": "3", "138": "1", "139": "4", "140": "1",
        "141": "1", "142": "1", "143": "3", "144": "1", "145": "3", "146": "1", "147": "2", "148": "4", "149": "3", "150": "4",
        "151": "1", "152": "1", "153": "1", "154": "3", "155": "3", "156": "4", "157": "2", "158": "1", "159": "2", "160": "2",
        "161": "2", "162": "2", "163": "1", "164": "2", "165": "2", "166": "2", "167": "2", "168": "2", "169": "4", "170": "3",
        "171": "4", "172": "1", "173": "1", "174": "3", "175": "3", "176": "2", "177": "2", "178": "1", "179": "4", "180": "2"
      },
      "46": {
        "001": "2", "002": "2", "003": "4", "004": "2", "005": "2", "006": "1", "007": "4", "008": "1", "009": "2", "010": "2",
        "011": "2", "012": "3", "013": "1", "014": "1", "015": "3", "016": "3", "017": "4", "018": "3", "019": "1", "020": "1",
        "021": "3", "022": "1", "023": "1", "024": "1", "025": "4", "026": "1", "027": "1", "028": "1", "029": "2", "030": "2",
        "031": "1", "032": "1", "033": "1", "034": "1", "035": "2", "036": "4", "037": "3", "038": "3", "039": "1", "040": "1",
        "041": "4", "042": "2", "043": "2", "044": "3", "045": "4", "046": "2", "047": "2", "048": "2", "049": "1", "050": "1",
        "051": "1", "052": "2", "053": "3", "054": "2", "055": "1", "056": "1,4", "057": "1", "058": "3", "059": "3", "060": "3",
        "061": "3", "062": "1", "063": "2", "064": "3", "065": "2", "066": "1", "067": "4", "068": "4", "069": "4", "070": "4",
        "071": "2", "072": "4", "073": "4", "074": "3", "075": "2", "076": "3", "077": "1", "078": "3", "079": "1", "080": "4",
        "081": "4", "082": "4", "083": "1", "084": "1", "085": "1", "086": "4", "087": "4", "088": "4", "089": "4", "090": "2",
        "091": "4", "092": "3", "093": "4", "094": "1", "095": "3", "096": "4", "097": "3", "098": "2", "099": "1", "100": "2",
        "101": "2", "102": "1", "103": "3", "104": "3", "105": "4", "106": "4", "107": "1", "108": "1", "109": "1", "110": "2",
        "111": "1", "112": "4", "113": "1", "114": "1", "115": "1", "116": "4", "117": "2", "118": "2", "119": "3", "120": "2",
        "121": "4", "122": "4", "123": "4", "124": "4", "125": "3", "126": "4", "127": "2", "128": "1", "129": "4", "130": "2",
        "131": "1", "132": "4", "133": "1", "134": "4", "135": "1", "136": "3", "137": "2", "138": "1", "139": "2", "140": "3",
        "141": "3", "142": "1", "143": "3", "144": "4", "145": "1", "146": "1", "147": "3", "148": "4", "149": "3", "150": "4",
        "151": "2", "152": "2", "153": "4", "154": "4", "155": "4", "156": "2", "157": "1", "158": "3", "159": "3", "160": "4",
        "161": "3", "162": "3", "163": "4", "164": "2", "165": "3", "166": "4", "167": "1", "168": "1", "169": "3", "170": "2",
        "171": "1", "172": "3", "173": "4", "174": "2", "175": "4", "176": "1", "177": "1", "178": "1", "179": "1", "180": "2"
      },
      "47": {
        "001": "3", "002": "2", "003": "3", "004": "3", "005": "4", "006": "2", "007": "3", "008": "3", "009": "3", "010": "2",
        "011": "3", "012": "4", "013": "1", "014": "1", "015": "4", "016": "3", "017": "2", "018": "4", "019": "1", "020": "3",
        "021": "4", "022": "3", "023": "1", "024": "4", "025": "3", "026": "1", "027": "3", "028": "1", "029": "4", "030": "2",
        "031": "2", "032": "1", "033": "4", "034": "1", "035": "3", "036": "3", "037": "3", "038": "3", "039": "4", "040": "4",
        "041": "2", "042": "3", "043": "4", "044": "3", "045": "4", "046": "4", "047": "3", "048": "1", "049": "3", "050": "2",
        "051": "2", "052": "3", "053": "1", "054": "3", "055": "2", "056": "2", "057": "2", "058": "2,3", "059": "1", "060": "4",
        "061": "2", "062": "4", "063": "3", "064": "4", "065": "1", "066": "4", "067": "3", "068": "1", "069": "3", "070": "4",
        "071": "4", "072": "2", "073": "3", "074": "2", "075": "4", "076": "1", "077": "1", "078": "3", "079": "1", "080": "1",
        "081": "2", "082": "3", "083": "2", "084": "3", "085": "2", "086": "2", "087": "2", "088": "4", "089": "4", "090": "3",
        "091": "1", "092": "3", "093": "2", "094": "4", "095": "2", "096": "2", "097": "4", "098": "4", "099": "2", "100": "2",
        "101": "1", "102": "3", "103": "4", "104": "2", "105": "3", "106": "4", "107": "2", "108": "4", "109": "2", "110": "1",
        "111": "2", "112": "3", "113": "2", "114": "1", "115": "2", "116": "4", "117": "2", "118": "3", "119": "4", "120": "3",
        "121": "3", "122": "3", "123": "3", "124": "1", "125": "3", "126": "2", "127": "3", "128": "3", "129": "3", "130": "4",
        "131": "2", "132": "3", "133": "2", "134": "1", "135": "1", "136": "2", "137": "1", "138": "3", "139": "4", "140": "3",
        "141": "2", "142": "3", "143": "1", "144": "1", "145": "2", "146": "1", "147": "4", "148": "1", "149": "3", "150": "2",
        "151": "1", "152": "2", "153": "3", "154": "4", "155": "1", "156": "4", "157": "1", "158": "4", "159": "2", "160": "1",
        "161": "3", "162": "3", "163": "1", "164": "3", "165": "2", "166": "3", "167": "1", "168": "4", "169": "4", "170": "2",
        "171": "4", "172": "2", "173": "4", "174": "1", "175": "3", "176": "3", "177": "2", "178": "2", "179": "1", "180": "3"
      },
      "48": {
        "001": "1", "002": "4", "003": "3", "004": "1", "005": "4", "006": "4", "007": "1", "008": "4", "009": "2", "010": "1",
        "011": "4", "012": "4", "013": "4", "014": "2", "015": "4", "016": "4", "017": "2", "018": "2", "019": "4", "020": "4",
        "021": "4", "022": "3", "023": "4", "024": "2", "025": "2", "026": "1", "027": "1", "028": "4", "029": "1", "030": "2",
        "031": "1", "032": "2", "033": "3", "034": "1", "035": "1", "036": "1", "037": "4", "038": "3", "039": "4", "040": "3",
        "041": "4", "042": "3", "043": "1", "044": "3", "045": "4", "046": "4", "047": "1", "048": "2", "049": "3", "050": "4",
        "051": "3,4", "052": "1", "053": "3", "054": "3", "055": "1", "056": "1", "057": "1", "058": "2", "059": "3", "060": "2",
        "061": "4", "062": "3", "063": "4", "064": "3", "065": "4", "066": "1", "067": "1", "068": "2", "069": "1", "070": "4",
        "071": "4", "072": "1", "073": "2", "074": "3", "075": "3", "076": "2", "077": "3", "078": "4", "079": "1", "080": "4",
        "081": "3", "082": "3", "083": "3", "084": "4", "085": "2", "086": "2", "087": "4", "088": "2", "089": "3", "090": "4",
        "091": "1", "092": "1", "093": "1", "094": "1", "095": "4", "096": "4", "097": "3", "098": "1", "099": "2", "100": "4",
        "101": "3", "102": "3", "103": "3", "104": "1", "105": "1", "106": "2", "107": "4", "108": "4", "109": "4", "110": "3",
        "111": "2", "112": "2", "113": "1", "114": "4", "115": "3", "116": "4", "117": "1", "118": "4", "119": "3", "120": "1",
        "121": "4", "122": "1", "123": "4", "124": "3", "125": "2", "126": "2", "127": "2", "128": "2", "129": "4", "130": "4",
        "131": "2", "132": "3", "133": "3", "134": "4", "135": "3", "136": "3", "137": "2", "138": "4", "139": "1", "140": "4",
        "141": "4", "142": "3", "143": "3", "144": "2", "145": "2", "146": "3", "147": "2", "148": "4", "149": "3", "150": "4",
        "151": "4", "152": "2", "153": "1", "154": "2", "155": "3", "156": "2", "157": "4", "158": "3", "159": "3", "160": "3",
        "161": "3", "162": "1", "163": "2", "164": "4", "165": "1", "166": "3", "167": "3", "168": "4", "169": "3", "170": "2",
        "171": "4", "172": "1", "173": "3", "174": "1", "175": "1", "176": "4", "177": "2", "178": "4", "179": "2", "180": "3"
      }
    };

    // ------------------------------------------------------------------------
    // 2) When the user clicks "Calculate Marks", we:
    //    • Read the chosen booklet code (45–48). If none selected, alert.
    //    • Read the uploaded CSV (Recorded Responses) and parse it into a map.
    //    • For each question in the chosen answer‐key map:
    //         – If RecordedResponse is "" (or "-"), count as blank (0 points).  
    //         – Else if RecordedResponse exactly matches one of the correct options (or one of the comma‐separated list), count as correct (+4).  
    //         – Otherwise, count as incorrect (−1) and record that Q-no in the wrong list.
    //    • Display totals and the list of wrong Q-nos in the "Results" box.
    // ------------------------------------------------------------------------
    document.getElementById('computeBtn').addEventListener('click', function () {
      const code = document.getElementById('bookletSelect').value;
      if (!code || !answerKeys[code]) {
        alert('Please select a valid Booklet Code (45–48).');
        return;
      }
      const file = document.getElementById('respFile').files[0];
      if (!file) {
        alert('Please upload your Recorded Responses CSV.');
        return;
      }

      // Parse a CSV file into a map: { "001": "2", "002": "", ... }
      function parseCSVFile(file, callback) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const text = e.target.result.trim();
          const lines = text.split(/\r?\n/);
          const map = {};
          lines.forEach(line => {
            // Each line: Qno,RecordedResponse
            const parts = line.split(',').map(s => s.trim());
            if (parts.length >= 2) {
              const qno = parts[0].padStart(3, '0');
              map[qno] = parts[1];
            }
          });
          callback(map);
        };
        reader.readAsText(file);
      }

      parseCSVFile(file, function (recordedMap) {
        const keyMap = answerKeys[code];
        let total = 0, correct = 0, incorrect = 0, blank = 0;
        const wrongQnos = [];

        // Subject-wise counters
        let physicsCorrect = 0, physicsIncorrect = 0;
        let chemistryCorrect = 0, chemistryIncorrect = 0;
        let biologyCorrect = 0, biologyIncorrect = 0;

        for (const [qno, correctOpt] of Object.entries(keyMap)) {
          total++;
          const recRaw = (recordedMap[qno] || '').trim();
          const rec = (recRaw === '-' ? '' : recRaw);
          const qnoNum = parseInt(qno);

          if (rec === '') {
            blank++;
          } else {
            const possibles = correctOpt.split(',').map(x => x.trim());
            if (possibles.includes(rec)) {
              correct++;
              // Update subject-wise correct counts
              if (qnoNum <= 45) physicsCorrect++;
              else if (qnoNum <= 90) chemistryCorrect++;
              else biologyCorrect++;
            } else {
              incorrect++;
              wrongQnos.push(qno);
              // Update subject-wise incorrect counts
              if (qnoNum <= 45) physicsIncorrect++;
              else if (qnoNum <= 90) chemistryIncorrect++;
              else biologyIncorrect++;
            }
          }
        }

        const totalScore = (correct * 4) + (incorrect * -1);
        const physicsScore = (physicsCorrect * 4) + (physicsIncorrect * -1);
        const chemistryScore = (chemistryCorrect * 4) + (chemistryIncorrect * -1);
        const biologyScore = (biologyCorrect * 4) + (biologyIncorrect * -1);

        // Update total results
        document.getElementById('totalQ').innerText = total;
        document.getElementById('correctCount').innerText = correct;
        document.getElementById('incorrectCount').innerText = incorrect;
        document.getElementById('blankCount').innerText = blank;
        document.getElementById('totalScore').innerText = totalScore;
        document.getElementById('wrongList').innerText = wrongQnos.join(', ');

        // Update subject-wise results
        document.getElementById('physicsCorrect').innerText = physicsCorrect;
        document.getElementById('physicsIncorrect').innerText = physicsIncorrect;
        document.getElementById('physicsScore').innerText = physicsScore;

        document.getElementById('chemistryCorrect').innerText = chemistryCorrect;
        document.getElementById('chemistryIncorrect').innerText = chemistryIncorrect;
        document.getElementById('chemistryScore').innerText = chemistryScore;

        document.getElementById('biologyCorrect').innerText = biologyCorrect;
        document.getElementById('biologyIncorrect').innerText = biologyIncorrect;
        document.getElementById('biologyScore').innerText = biologyScore;

        document.getElementById('results').style.display = 'block';
      });
    });

    // Add copy function
    function copyCode() {
      const codeElement = document.getElementById('downloadCode');
      const textArea = document.createElement('textarea');
      textArea.value = codeElement.textContent;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);

      const button = document.querySelector('.copy-button');
      const originalText = button.textContent;
      button.textContent = 'Copied!';
      setTimeout(() => {
        button.textContent = originalText;
      }, 2000);
    }
  </script>
</body>

</html>